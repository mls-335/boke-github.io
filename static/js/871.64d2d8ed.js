"use strict";(self["webpackChunkvue2_xm"]=self["webpackChunkvue2_xm"]||[]).push([[871],{9871:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user"}},[a("el-dialog",{attrs:{title:t.etxt?"新增用户":"修改用户",visible:t.isshow},on:{"update:visible":function(e){t.isshow=e}}},[a("userfrom",{attrs:{form:t.userfroms,formLabel:t.userfromlabel}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isshow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.kfrom}},[t._v("确 定")])],1)],1),a("div",{attrs:{id:"title"}},[a("div",{staticStyle:{height:"50px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.adduser}},[t._v("+新增")])],1),a("div",{staticClass:"liftTitle"},[a("userfrom",{attrs:{formLabel:t.formLabel,form:t.searchForm,inline:""}},[a("el-button",{staticStyle:{height:"40px"},attrs:{type:"primary"},on:{click:function(e){return t.getUserList(t.searchForm.keyword)}}},[t._v("搜索 ")])],1)],1)]),a("commonTable",{attrs:{tableData:t.tableData,tableLabel:t.tableLabel,config:t.config},on:{changepage:function(e){return t.getUserList()},commt:t.commt,upduser:t.deluser}})],1)},r=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px",inline:t.inline}},[t._l(t.formLabel,(function(e){return a("el-form-item",{key:e.data,attrs:{label:e.label}},["input"===e.type?a("el-input",{attrs:{placeholder:"请输入"+e.label},model:{value:t.form[e.data],callback:function(a){t.$set(t.form,e.data,a)},expression:"form[item.data]"}}):t._e(),"date"===e.type?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.form[e.data],callback:function(a){t.$set(t.form,e.data,a)},expression:"form[item.data]"}}):t._e(),"select"===e.type?a("el-select",{attrs:{placeholder:"请输入"+e.label},model:{value:t.form[e.data],callback:function(a){t.$set(t.form,e.data,a)},expression:"form[item.data]"}},t._l(e.options,(function(t){return a("el-option",{attrs:{label:t.label,value:t.value}})})),1):t._e()],1)})),a("el-form-item",[t._t("default")],2)],2)},o=[],i={props:{form:Object,formLabel:Array,inline:Boolean}},n=i,u=a(1001),c=(0,u.Z)(n,s,o,!1,null,null,null),p=c.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"序号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(10*(t.config.page-1)+e.$index+1))])]}}])}),t._l(t.tableLabel,(function(e,l){return a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.label},scopedSlots:t._u([{key:"default",fn:function(l){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(l.row[e.prop]))])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],2),a("el-pagination",{staticStyle:{float:"right","margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next",total:t.config.total,"current-page":t.config.page},on:{"current-change":t.conpage,"update:currentPage":function(e){return t.$set(t.config,"page",e)},"update:current-page":function(e){return t.$set(t.config,"page",e)}}})],1)},d=[],m={props:{tableData:Array,tableLabel:Array,config:Object},data(){return{}},methods:{conpage(t){this.$emit("changepage",t)},handleEdit(t){this.$emit("commt",t)},handleDelete(t,e){this.$emit("upduser",e)}}},h=m,b=(0,u.Z)(h,f,d,!1,null,null,null),g=b.exports,y={components:{userfrom:p,commonTable:g},data(){return{etxt:"true",isshow:!1,userfroms:{name:"",sex:"",birth:"",addr:"",age:""},userfromlabel:[{data:"name",label:"姓名",type:"input"},{data:"sex",label:"性别",type:"select",options:[{label:"女",value:0},{label:"男",value:1}]},{data:"birth",label:"出生日期",type:"date"},{data:"addr",label:"地址",type:"input"},{data:"age",label:"年龄",type:"input"}],tableData:[],tableLabel:[{label:"姓名",prop:"name"},{label:"年龄",prop:"age"},{label:"性别",prop:"sexLabel"},{label:"出生日期",prop:"birth"},{label:"地址",prop:"addr"}],config:{page:1,total:20},searchForm:{keyword:""},formLabel:[{data:"keyword",label:"",type:"input"}]}},methods:{getUserList(t=""){console.log(t),t&&(this.config.page=1),this.$http.get("/api/user/getUserData",{params:{page:this.config.page,name:t}}).then((t=>{this.config.total=t.data.count,this.tableData=t.data.list.map((t=>(t.sexLabel=0===t.sex?"女":"男",t)))}))},adduser(){this.isshow=!0,this.etxt=!0,this.userfroms={}},commt(t){this.isshow=!0,this.etxt=!1;let e={...t};this.userfroms=e},deluser(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$http.get("/api/user/delUserInfo",{params:{id:t.id}}).then((t=>{this.getUserList()})),this.$message({type:"success",message:"删除成功!"})})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},kfrom(){this.etxt?this.$http.post("/api/user/addUserInfo",this.userfroms).then((t=>{this.isshow=!1,this.getUserList()})):this.$http.post("/api/user/updUserInfo",this.userfroms).then((t=>{this.isshow=!1,this.getUserList()}))}},mounted(){this.getUserList()}},v=y,x=(0,u.Z)(v,l,r,!1,null,"ed15f382",null),_=x.exports}}]);
//# sourceMappingURL=871.64d2d8ed.js.map